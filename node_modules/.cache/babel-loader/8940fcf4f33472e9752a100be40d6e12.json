{"ast":null,"code":"import _toConsumableArray from\"C:/Users/pc/Desktop/react/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/pc/Desktop/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Layout from'../common/Layout';import{useRef,useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function Community(){var dummyPosts=[{title:'1',content:'a'},{title:'2',content:'b'},{title:'3',content:'c'},{title:'4',content:'d'},{title:'5',content:'e'}];var input=useRef(null);var textarea=useRef(null);var inputEdit=useRef(null);var textareaEdit=useRef(null);var _useState=useState(dummyPosts),_useState2=_slicedToArray(_useState,2),Posts=_useState2[0],setPosts=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),Allowed=_useState4[0],setAllowed=_useState4[1];var resetForm=function resetForm(){input.current.value='';textarea.current.value='';if(inputEdit.current){inputEdit.current.value='';textareaEdit.current.value='';}};var createPost=function createPost(){if(!input.current.value.trim()||!textarea.current.value.trim()){resetForm();return alert('제목과 본문을 모두 입력하세요');}setPosts([].concat(_toConsumableArray(Posts),[{title:input.current.value,content:textarea.current.value}]));resetForm();};var deletePost=function deletePost(index){console.log(index);setPosts(Posts.filter(function(post,idx){return idx!==index;}));};var enableUpdate=function enableUpdate(index){if(!Allowed)return;setAllowed(false);setPosts(Posts.map(function(post,idx){if(idx===index)post.enableUpdate=true;return post;}));};var disableUpdate=function disableUpdate(index){setAllowed(true);setPosts(Posts.map(function(post,idx){if(idx===index)post.enableUpdate=false;return post;}));};var updatePost=function updatePost(index){if(!inputEdit.current.value.trim()||!textareaEdit.current.value.trim()){resetForm();return alert('수정할 제목과 본문을 모두 입력하세요');}setPosts(Posts.map(function(post,idx){if(idx===index){post.title=inputEdit.current.value;post.content=textareaEdit.current.value;post.enableUpdate=false;}return post;}));};//수정모드가 열렸을 때 다른 수정 버튼을 누르더라도 수정이 되지 않도록 해야 하는데\n//이렇게 하려며 allowed라는 어떤 state를 하나 만들어서\n//그 값이 true일 때만 이 edit를 눌렀을 때 열리도록\n//어떤 state값을 추가로 하나 만들어서\n//내가 만약 edit을 눌러서 현재 수정 모드로 바뀌어 있으면\n//그 state 값을 false, true 이렇게 지정을 해서 그 값이 true일 때만 edit 이벤트가 발생하도록 만들어 보자\nuseEffect(function(){console.log(Posts);},[Posts]);return/*#__PURE__*/_jsxs(Layout,{name:'Community',children:[/*#__PURE__*/_jsxs(\"div\",{className:\"inputBox\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",ref:input}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{cols:\"30\",rows:\"5\",placeholder:\"\\uBCF8\\uBB38\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694 \",ref:textarea}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{onClick:resetForm,children:\"CANCEL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:createPost,children:\"WRITE\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"showBox\",children:Posts.map(function(post,idx){return/*#__PURE__*/_jsx(\"article\",{children:post.enableUpdate?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"editTxt\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:post.title,ref:inputEdit}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"textarea\",{cols:\"30\",rows:\"4\",defaultValue:post.content,ref:textareaEdit}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btnSet\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return disableUpdate(idx);},children:\"CANCEL\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return updatePost(idx);},children:\"UPDATE\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"txt\",children:[/*#__PURE__*/_jsx(\"h2\",{children:post.title}),/*#__PURE__*/_jsx(\"p\",{children:post.content})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btnSet\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return enableUpdate(idx);},children:\"EDIT\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return deletePost(idx);},children:\"DELELTE\"})]})]})},idx);})})]});}export default Community;","map":{"version":3,"names":["Layout","useRef","useEffect","useState","Community","dummyPosts","title","content","input","textarea","inputEdit","textareaEdit","Posts","setPosts","Allowed","setAllowed","resetForm","current","value","createPost","trim","alert","deletePost","index","console","log","filter","post","idx","enableUpdate","map","disableUpdate","updatePost"],"sources":["C:/Users/pc/Desktop/react/src/components/sub/Community.js"],"sourcesContent":["import Layout from '../common/Layout';\r\nimport { useRef, useEffect, useState } from 'react';\r\n\r\nfunction Community() {\r\n\tconst dummyPosts = [\r\n\t\t{ title: '1', content: 'a' },\r\n\t\t{ title: '2', content: 'b' },\r\n\t\t{ title: '3', content: 'c' },\r\n\t\t{ title: '4', content: 'd' },\r\n\t\t{ title: '5', content: 'e' },\r\n\t];\r\n\r\n\tconst input = useRef(null);\r\n\tconst textarea = useRef(null);\r\n\tconst inputEdit = useRef(null);\r\n\tconst textareaEdit = useRef(null);\r\n\r\n\tconst [Posts, setPosts] = useState(dummyPosts);\r\n\tconst [Allowed, setAllowed] = useState(true);\r\n\r\n\tconst resetForm = () => {\r\n\t\tinput.current.value = '';\r\n\t\ttextarea.current.value = '';\r\n\t\tif (inputEdit.current) {\r\n\t\t\tinputEdit.current.value = '';\r\n\t\t\ttextareaEdit.current.value = '';\r\n\t\t}\r\n\t};\r\n\r\n\tconst createPost = () => {\r\n\t\tif (!input.current.value.trim() || !textarea.current.value.trim()) {\r\n\t\t\tresetForm();\r\n\t\t\treturn alert('제목과 본문을 모두 입력하세요');\r\n\t\t}\r\n\t\tsetPosts([\r\n\t\t\t...Posts,\r\n\t\t\t{ title: input.current.value, content: textarea.current.value },\r\n\t\t]);\r\n\t\tresetForm();\r\n\t};\r\n\r\n\tconst deletePost = (index) => {\r\n\t\tconsole.log(index);\r\n\r\n\t\tsetPosts(Posts.filter((post, idx) => idx !== index));\r\n\t};\r\n\r\n\tconst enableUpdate = (index) => {\r\n\t\tif (!Allowed) return;\r\n\r\n\t\tsetAllowed(false);\r\n\t\tsetPosts(\r\n\t\t\tPosts.map((post, idx) => {\r\n\t\t\t\tif (idx === index) post.enableUpdate = true;\r\n\t\t\t\treturn post;\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\tconst disableUpdate = (index) => {\r\n\t\tsetAllowed(true);\r\n\t\tsetPosts(\r\n\t\t\tPosts.map((post, idx) => {\r\n\t\t\t\tif (idx === index) post.enableUpdate = false;\r\n\t\t\t\treturn post;\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\tconst updatePost = (index) => {\r\n\t\tif (!inputEdit.current.value.trim() || !textareaEdit.current.value.trim()) {\r\n\t\t\tresetForm();\r\n\t\t\treturn alert('수정할 제목과 본문을 모두 입력하세요');\r\n\t\t}\r\n\r\n\t\tsetPosts(\r\n\t\t\tPosts.map((post, idx) => {\r\n\t\t\t\tif (idx === index) {\r\n\t\t\t\t\tpost.title = inputEdit.current.value;\r\n\t\t\t\t\tpost.content = textareaEdit.current.value;\r\n\t\t\t\t\tpost.enableUpdate = false;\r\n\t\t\t\t}\r\n\t\t\t\treturn post;\r\n\t\t\t})\r\n\t\t);\r\n\t};\r\n\r\n\t//수정모드가 열렸을 때 다른 수정 버튼을 누르더라도 수정이 되지 않도록 해야 하는데\r\n\t//이렇게 하려며 allowed라는 어떤 state를 하나 만들어서\r\n\t//그 값이 true일 때만 이 edit를 눌렀을 때 열리도록\r\n\t//어떤 state값을 추가로 하나 만들어서\r\n\t//내가 만약 edit을 눌러서 현재 수정 모드로 바뀌어 있으면\r\n\t//그 state 값을 false, true 이렇게 지정을 해서 그 값이 true일 때만 edit 이벤트가 발생하도록 만들어 보자\r\n\tuseEffect(() => {\r\n\t\tconsole.log(Posts);\r\n\t}, [Posts]);\r\n\r\n\treturn (\r\n\t\t<Layout name={'Community'}>\r\n\t\t\t<div className='inputBox'>\r\n\t\t\t\t<input type='text' placeholder='제목을 입력하세요' ref={input} />\r\n\t\t\t\t<br />\r\n\t\t\t\t<textarea\r\n\t\t\t\t\tcols='30'\r\n\t\t\t\t\trows='5'\r\n\t\t\t\t\tplaceholder='본문을 입력하세요 '\r\n\t\t\t\t\tref={textarea}></textarea>\r\n\t\t\t\t<br />\r\n\r\n\t\t\t\t<button onClick={resetForm}>CANCEL</button>\r\n\t\t\t\t<button onClick={createPost}>WRITE</button>\r\n\t\t\t</div>\r\n\r\n\t\t\t<div className='showBox'>\r\n\t\t\t\t{Posts.map((post, idx) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<article key={idx}>\r\n\t\t\t\t\t\t\t{post.enableUpdate ? (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<div className='editTxt'>\r\n\t\t\t\t\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={post.title}\r\n\t\t\t\t\t\t\t\t\t\t\tref={inputEdit}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t\t\tcols='30'\r\n\t\t\t\t\t\t\t\t\t\t\trows='4'\r\n\t\t\t\t\t\t\t\t\t\t\tdefaultValue={post.content}\r\n\t\t\t\t\t\t\t\t\t\t\tref={textareaEdit}></textarea>\r\n\t\t\t\t\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className='btnSet'>\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => disableUpdate(idx)}>CANCEL</button>\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => updatePost(idx)}>UPDATE</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t) : (\r\n\t\t\t\t\t\t\t\t<>\r\n\t\t\t\t\t\t\t\t\t<div className='txt'>\r\n\t\t\t\t\t\t\t\t\t\t<h2>{post.title}</h2>\r\n\t\t\t\t\t\t\t\t\t\t<p>{post.content}</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t<div className='btnSet'>\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => enableUpdate(idx)}>EDIT</button>\r\n\t\t\t\t\t\t\t\t\t\t<button onClick={() => deletePost(idx)}>DELELTE</button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</article>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</Layout>\r\n\t);\r\n}\r\n\r\nexport default Community;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}