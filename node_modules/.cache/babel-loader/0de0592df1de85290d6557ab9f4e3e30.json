{"ast":null,"code":"import _createForOfIteratorHelper from\"C:/Users/pc/Desktop/react/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _slicedToArray from\"C:/Users/pc/Desktop/react/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import Header from'../common/Header';import Visual from'./Visual';import News from'./News';import Section_coffee from'./Section_coffee';import Section_dessert from'./Section_dessert';import Section_shop from'./Section_shop';import Btns from'./Btns';import{useEffect,useRef,useState}from'react';import Anime from'../../asset/anim';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Main(){var main=useRef(null);var pos=useRef([]);var _useState=useState(0),_useState2=_slicedToArray(_useState,2),Index=_useState2[0],setIndex=_useState2[1];var secs=null;var getPos=function getPos(){pos.current=[];secs=main.current.querySelectorAll('.myScroll');var _iterator=_createForOfIteratorHelper(secs),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var sec=_step.value;pos.current.push(sec.offsetTop);}// console.log(pos.current);\n}catch(err){_iterator.e(err);}finally{_iterator.f();}};var activation=function activation(){var base=-window.innerHeight/2;var scroll=window.scrollY;var btns=main.current.querySelectorAll('.scroll_navi li');pos.current.map(function(pos,idx){if(scroll>=pos+base){var _iterator2=_createForOfIteratorHelper(btns),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var btn=_step2.value;btn.classList.remove('on');}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}var _iterator3=_createForOfIteratorHelper(secs),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var sec=_step3.value;sec.classList.remove('on');}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}btns[idx].classList.add('on');secs[idx].classList.add('on');}});};useEffect(function(){getPos();window.addEventListener('resize',getPos);window.addEventListener('scroll',activation);return function(){window.removeEventListener('resize',getPos);window.removeEventListener('scroll',activation);};},[]);useEffect(function(){new Anime(window,{prop:'scroll',value:pos.current[Index],duration:500});},[Index]);return/*#__PURE__*/ (//useRef로 참조하기 위해 main으로 감싼다\n//useRef로 참조하면 main 안쪽에 있는 내용들은 쿼리셀렉터로 접근할 수 있으니\n//main요소를 useRef로 참조한 다음 참도된 객체에서 쿼리셀렉터ALL로 공통class 'myscroll'을 전부 찾을 수 있다\n_jsxs(\"main\",{ref:main,children:[/*#__PURE__*/_jsx(Header,{type:'main'}),/*#__PURE__*/_jsx(Visual,{}),/*#__PURE__*/_jsx(News,{}),/*#__PURE__*/_jsx(Section_dessert,{}),/*#__PURE__*/_jsx(Section_coffee,{}),/*#__PURE__*/_jsx(Section_shop,{}),/*#__PURE__*/_jsx(Btns,{setIndex:setIndex})]}));}export default Main;","map":{"version":3,"names":["Header","Visual","News","Section_coffee","Section_dessert","Section_shop","Btns","useEffect","useRef","useState","Anime","Main","main","pos","Index","setIndex","secs","getPos","current","querySelectorAll","sec","push","offsetTop","activation","base","window","innerHeight","scroll","scrollY","btns","map","idx","btn","classList","remove","add","addEventListener","removeEventListener","prop","value","duration"],"sources":["C:/Users/pc/Desktop/react/src/components/main/Main.js"],"sourcesContent":["import Header from '../common/Header';\r\nimport Visual from './Visual';\r\nimport News from './News';\r\nimport Section_coffee from './Section_coffee';\r\nimport Section_dessert from './Section_dessert';\r\nimport Section_shop from './Section_shop';\r\nimport Btns from './Btns';\r\n\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport Anime from '../../asset/anim';\r\n\r\nfunction Main() {\r\n\tconst main = useRef(null);\r\n\tconst pos = useRef([]);\r\n\tconst [Index, setIndex] = useState(0);\r\n\tlet secs = null;\r\n\r\n\tconst getPos = () => {\r\n\t\tpos.current = [];\r\n\t\tsecs = main.current.querySelectorAll('.myScroll');\r\n\t\tfor (const sec of secs) pos.current.push(sec.offsetTop);\r\n\t\t// console.log(pos.current);\r\n\t};\r\n\r\n\tconst activation = () => {\r\n\t\tconst base = -window.innerHeight / 2;\r\n\t\tconst scroll = window.scrollY;\r\n\t\tconst btns = main.current.querySelectorAll('.scroll_navi li');\r\n\r\n\t\tpos.current.map((pos, idx) => {\r\n\t\t\tif (scroll >= pos + base) {\r\n\t\t\t\tfor (const btn of btns) btn.classList.remove('on');\r\n\t\t\t\tfor (const sec of secs) sec.classList.remove('on');\r\n\t\t\t\tbtns[idx].classList.add('on');\r\n\t\t\t\tsecs[idx].classList.add('on');\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tgetPos();\r\n\t\twindow.addEventListener('resize', getPos);\r\n\t\twindow.addEventListener('scroll', activation);\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('resize', getPos);\r\n\t\t\twindow.removeEventListener('scroll', activation);\r\n\t\t};\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tnew Anime(window, {\r\n\t\t\tprop: 'scroll',\r\n\t\t\tvalue: pos.current[Index],\r\n\t\t\tduration: 500,\r\n\t\t});\r\n\t}, [Index]);\r\n\r\n\treturn (\r\n\t\t//useRef로 참조하기 위해 main으로 감싼다\r\n\t\t//useRef로 참조하면 main 안쪽에 있는 내용들은 쿼리셀렉터로 접근할 수 있으니\r\n\t\t//main요소를 useRef로 참조한 다음 참도된 객체에서 쿼리셀렉터ALL로 공통class 'myscroll'을 전부 찾을 수 있다\r\n\t\t<main ref={main}>\r\n\t\t\t<Header type={'main'} />\r\n\t\t\t<Visual />\r\n\t\t\t<News />\r\n\t\t\t<Section_dessert />\r\n\t\t\t<Section_coffee />\r\n\t\t\t<Section_shop />\r\n\t\t\t<Btns setIndex={setIndex} />\r\n\t\t</main>\r\n\t);\r\n}\r\n\r\nexport default Main;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}